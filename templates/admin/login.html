<!DOCTYPE html>
<html lang="en" >
<head>
<meta charset="UTF-8">
<title>Bootstrap登录注册表单代码 </title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<!--图标库-->
{#<link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.min.css'>#}

<!--响应式框架-->
<link rel='stylesheet' href='/static/admin/css/bootstrap.min.css'>
 <link rel="stylesheet" href="/static/common/libs/bootstrap/bootstrap.min.css">
    <script src="/static/common/js/jquery.min.js"></script>
    <script src="/static/common/js/jquery.validate-1.13.1.js"> </script>
    <script src="/static/common/js/jquery.form.js"> </script>
    <script src="/static/common/libs/bootstrap/bootstrap.min.js"></script>
<!--主要样式-->
<link rel="stylesheet" href="/static/admin/css/login_register.css">

</head>
<body>

<div class="container">

	<div class="card-wrap">

		<div class="card border-0 shadow card--welcome is-show" id="welcome">
			<div class="card-body">
				<h2 class="card-title">欢迎光临</h2>
				<p>管理员</p>
				<div class="btn-wrap"><a class="btn btn-lg btn-login js-btn" data-target="login">管理员登录</a></div>
			</div>
		</div>

{#		<div class="card border-0 shadow card--register" id="register">#}
{#			<div class="card-body">#}
{#				<h2 class="card-title">会员注册</h2>#}
{#				 <form  class='formregister' method="post" action="/index/register/">#}
{#                    {% csrf_token %}#}
{#					<div class="form-group">#}
{#						<input class="form-control" type="text" placeholder="用户名" name="user" >#}
{#					</div>#}
{#					<div class="form-group">#}
{#						<input class="form-control" type="email" placeholder="邮箱" required="required">#}
{#					</div>#}
{#					<div class="form-group">#}
{#						<input class="form-control" type="password" placeholder="密码" name="pwd" >#}
{#					</div>#}
{#					<button  type="submit" class="btn btn-lg">注册</button>#}
{#				</form>#}
{#			</div>#}
{#			<button class="btn btn-back js-btn" data-target="welcome"><i class="fas fa-angle-left"></i></button>#}
{#		</div>#}

		<div class="card border-0 shadow card--login" id="login">
			<div class="card-body">
				<h2 class="card-title">欢迎管理员登录！</h2>
				<form  class='formlogin' method="post" action="/admin/login/">
                    {% csrf_token %}
					<div class="form-group">
						<input class="form-control" type="text" placeholder="用户名"  name="user" >
					</div>
					<div class="form-group">
						<input class="form-control" type="password" placeholder="密码" required="required"name="pwd">
					</div>
                     <label>
                      <input type="checkbox" name="remember"> 记住我
                    </label>
					<p><a href="#">忘记密码?</a></p>
					<button  type="submit" class="btn btn-lg">登录</button>
				</form>
			</div>
{#			<button  type="submit" class="btn btn-back js-btn" data-target="welcome"><i class="fas fa-angle-left"></i></button>#}
		</div>

	</div>

</div>

<script src="/static/admin/js/login_register.js"></script>
<script>
    $(".formregister").validate({
        rules: {
            user: {
                required: true,
                maxlength:10,
                minlength:4,
            },
            pwd: {
                required: true,
                maxlength:10,
                minlength:5,
            },
        },
    messages:{
             user: {
                required: "请输入用户名，不能为空",
                 maxlength:"请输入正确用户名",
                minlength:"请输入正确用户名",
            },
            pwd: {
                required: "请输入密码，不能为空",
                maxlength:"请输入正确密码",
                minlength:"请输入正确密码",
            },
    },
    submitHandler:function(form){
            alert("正在进行登录...")
            $(".formregister").ajaxSubmit(function(data){
                {#data = JSON.parse(data)#}
                console.log(data)
                if(data['code']==1){
                    alert(data['msg'])
                    console.log('success')
                    location.href="/admin/index/"
                }else{
                    alert(data['msg'])
                }

            })
    }

    })
 $(".formlogin").validate({
        rules: {
            user: {
                required: true,
                maxlength:10,
                minlength:4,
            },
            pwd: {
                required: true,
                maxlength:10,
                minlength:4,
            },
        },
    messages:{
             user: {
                required: "请输入用户名，不能为空",
                 maxlength:"请输入正确用户名",
                minlength:"请输入正确用户名",
            },
            pwd: {
                required: "请输入密码，不能为空",
                maxlength:"请输入正确密码",
                minlength:"请输入正确密码",
            },
    },
    submitHandler:function(form){
            alert("正在进行登录...")
            $(".formlogin").ajaxSubmit(function(data){
                {#data = JSON.parse(data)#}
                console.log(data)
                if(data['code']==1){
                    alert(data['msg'])
                    console.log('success')
                    location.href="/index/goods/"
                }else{
                    alert(data['msg'])
                }

            })
    }

    })
    $('.btn-lg').click(function (){
        console.log('hello')
    })
</script>

</body>
</html>